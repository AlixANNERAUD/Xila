

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Software Type &mdash; Xila  documentation</title>
  

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Task Function Type" href="Task%20Function.html" />
    <link rel="prev" title="Software Handle Type" href="Software%20Handle.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html">
          

          
            
            <img src="../../../_static/Xila.png" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Introduction/Presentation.html">Presentation</a></li>
</ul>
<p class="caption"><span class="caption-text">Use</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Use/Desk.html">Desk</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Use/Dialogs.html">Dialogs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Use/File%20Manager.html">File Manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Use/Preferences.html">Preferences</a></li>
</ul>
<p class="caption"><span class="caption-text">Develop</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../Getting%20Started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../Hardware%20Reference.html">Hardware Reference</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../Software%20Reference.html">Software Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../Software%20Reference.html#abstraction-layers">Abstraction Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Software%20Reference.html#modules">Modules</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../Software%20Reference.html#types">Types</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="Address.html">Address</a></li>
<li class="toctree-l3"><a class="reference internal" href="Event.html">Event</a></li>
<li class="toctree-l3"><a class="reference internal" href="Image.html">Image</a></li>
<li class="toctree-l3"><a class="reference internal" href="Instruction.html">Instruction</a></li>
<li class="toctree-l3"><a class="reference internal" href="Page.html">Page</a></li>
<li class="toctree-l3"><a class="reference internal" href="Software%20Handle.html">Software Handle</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Software</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#api-reference">API Reference</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="Task%20Function.html">Task Function</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Software%20Reference.html#macro">Macro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Software%20Reference.html#registries">Registries</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../Miscellaneous/Release%20notes.html">Release notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Miscellaneous/About.html">About</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Xila</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../Software%20Reference.html">Software Reference</a> &raquo;</li>
        
      <li>Software Type</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/Develop/Software Reference/Types/Software.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="software-type">
<h1>Software Type<a class="headerlink" href="#software-type" title="Permalink to this headline">¶</a></h1>
<p>Here you will find a full description of the software type.</p>
<p>In order to facilitate software management and dynamic memory allocation (avoid fragmentation), the functions and methods of the software are stored in a class..
Thus, when software is booted, an instance of the class of the software in question is created.
Once the software is closed, this same instance is released.
Xila uses this API also to communicate with the software (send instructions, variables etc.).</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Using global space in places of this class results in reduced memory available at startup.
Indeed, this type of allocation block a part of the memory and will never be deallocated.</p>
</div>
<div class="section" id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h2>
<dl class="cpp class">
<dt id="_CPPv4N10Xila_Class8SoftwareE">
<span id="_CPPv3N10Xila_Class8SoftwareE"></span><span id="_CPPv2N10Xila_Class8SoftwareE"></span><span id="Xila_Class::Software"></span><span class="target" id="class_xila___class_1_1_software"></span><em class="property"><span class="pre">class</span> </em><code class="sig-name descname"><span class="pre">Software</span></code><a class="headerlink" href="#_CPPv4N10Xila_Class8SoftwareE" title="Permalink to this definition">¶</a><br /></dt>
<dd><p><a class="reference internal" href="#class_xila___class_1_1_software"><span class="std std-ref">Software</span></a> class. </p>
<p>This API is used by core in order to communicate with the software. </p>
<p>Subclassed by Calculator_Class, Clock_Class, Internet_Browser_Class, Music_Player_Class, Oscilloscope_Class, Paint_Class, Periodic_Class, Piano_Class, Pong_Class, Shell_Class, Simon_Class, Template_Class, Text_Editor_Class, Tiny_Basic_Class</p>
</dd></dl>

</div>
<div class="section" id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h2>
<div class="highlight-C notranslate"><div class="highlight"><pre><span></span><span class="n">Xila_Class</span><span class="o">::</span><span class="n">Software_Handle</span> <span class="n">My_Software_Handle</span><span class="p">;</span>

<span class="n">class</span> <span class="nl">My_Software</span> <span class="p">:</span> <span class="n">public</span> <span class="n">Xila_Class</span><span class="o">::</span><span class="n">Software</span>
<span class="p">{</span>
<span class="nl">private</span><span class="p">:</span>
    <span class="k">static</span> <span class="n">My_Software</span><span class="o">*</span> <span class="n">Instance_Pointer</span><span class="p">;</span>   <span class="c1">// -- Instance pointer for static function like tasks.</span>

<span class="nl">public</span><span class="p">:</span>

    <span class="k">static</span> <span class="kt">void</span> <span class="n">Main_Task</span><span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">switch</span> <span class="p">(</span><span class="n">Instance_Pointer</span><span class="o">-&gt;</span><span class="n">Get_Instruction</span><span class="p">())</span>    <span class="c1">// -- Get instruction from the instruction queue.</span>
            <span class="p">{</span>
            <span class="k">case</span> <span class="n">Xila</span><span class="p">.</span><span class="nl">Idle</span><span class="p">:</span> <span class="c1">// -- Instruction when no instruction is available.</span>
                <span class="n">Instance_Pointer</span><span class="o">-&gt;</span><span class="n">Send_Instruction</span><span class="p">(</span><span class="sc">&#39;T&#39;</span><span class="p">,</span> <span class="sc">&#39;e&#39;</span><span class="p">);</span>   <span class="c1">// -- Send the instruction &quot;Te&quot; to the instruction queue.</span>
                <span class="n">Xila</span><span class="p">.</span><span class="n">Task</span><span class="p">.</span><span class="n">Delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>   <span class="c1">// -- Don&#39;t forget to let compute time to other software.</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="nf">Instruction</span><span class="p">(</span><span class="sc">&#39;T&#39;</span><span class="p">,</span> <span class="sc">&#39;e&#39;</span><span class="p">)</span><span class="o">:</span> <span class="c1">// -- Instruction &quot;Te&quot;</span>
                <span class="n">Instance_Pointer</span><span class="o">-&gt;</span><span class="n">Set_Watchdog_Timeout</span><span class="p">(</span><span class="mi">30000</span><span class="p">);</span>  <span class="c1">// -- Set watchdog timeout to maximum (30 seconds), will automatically reset to 5 seconds when delay is called.</span>
                <span class="c1">// -- Do a long task here.</span>
                <span class="n">Instance_Pointer</span><span class="o">-&gt;</span><span class="n">Send_Instruction</span><span class="p">(</span><span class="sc">&#39;S&#39;</span><span class="p">,</span> <span class="sc">&#39;V&#39;</span><span class="p">);</span>   <span class="c1">// -- Send the instruction &quot;SV&quot; to the instruction queue.</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="nf">Instruction</span><span class="p">(</span><span class="sc">&#39;S&#39;</span><span class="p">,</span> <span class="sc">&#39;V&#39;</span><span class="p">)</span><span class="o">:</span> <span class="c1">// -- Instruction &quot;SV&quot;</span>
                <span class="p">{</span>
                    <span class="kt">long</span> <span class="n">Variable_To_Send</span> <span class="o">=</span> <span class="mi">18</span><span class="p">;</span>
                    <span class="n">Instance_Pointer</span><span class="o">-&gt;</span><span class="n">Set_Variable</span><span class="p">(</span><span class="n">Address</span><span class="p">(</span><span class="sc">&#39;V&#39;</span><span class="p">,</span> <span class="sc">&#39;a&#39;</span><span class="p">),</span> <span class="n">Xila</span><span class="p">.</span><span class="n">Variable_Long</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">Variable_To_Send</span><span class="p">);</span>    <span class="c1">// -- Set a long variable at the address &quot;Va&quot; with the value 18.</span>
                <span class="p">}</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="k">default</span><span class="o">:</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">static</span> <span class="n">Xila_Class</span><span class="o">::</span><span class="n">Software</span><span class="o">*</span> <span class="n">Load</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">Instance_Pointer</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">delete</span> <span class="n">Instance_Pointer</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">Instance_Pointer</span> <span class="o">=</span> <span class="n">new</span> <span class="n">My_Software</span><span class="p">();</span>
        <span class="k">return</span> <span class="n">Instance_Pointer</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">My_Software</span><span class="p">()</span> <span class="o">:</span> <span class="n">Xila_Class</span><span class="o">::</span><span class="n">Software</span><span class="p">(</span><span class="n">My_Software_Handle</span><span class="p">)</span>    <span class="c1">// -- Constructor</span>
    <span class="p">{</span>
        <span class="n">Xila</span><span class="p">.</span><span class="n">Task</span><span class="p">.</span><span class="n">Create</span><span class="p">(</span><span class="n">Main_Task</span><span class="p">,</span> <span class="s">&quot;My Software Task&quot;</span><span class="p">,</span> <span class="n">Memory_Chunk</span><span class="p">(</span><span class="mi">4</span><span class="p">),</span> <span class="nb">NULL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">Task_Handle</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="o">~</span><span class="n">My_Software</span><span class="p">()</span>  <span class="c1">// -- Destructor</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">Instance_Pointer</span> <span class="o">!=</span> <span class="n">this</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">delete</span> <span class="n">Instance_Pointer</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">Instance_Pointer</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span>

<span class="n">Xila_Class</span><span class="o">::</span><span class="n">Software_Handle</span> <span class="n">My_Software_Handle</span><span class="p">(</span><span class="s">&quot;My Software&quot;</span><span class="p">,</span> <span class="mi">44</span><span class="p">,</span> <span class="n">My_Software</span><span class="o">::</span><span class="n">Load</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="Task%20Function.html" class="btn btn-neutral float-right" title="Task Function Type" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="Software%20Handle.html" class="btn btn-neutral float-left" title="Software Handle Type" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Alix ANNERAUD.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>